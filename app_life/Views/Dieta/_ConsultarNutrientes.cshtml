@model IEnumerable<APP_Life.Models.alimento>

@{
    ViewBag.Title = "ConsultarNutrientes";
}

<h2>Consultar Nutrientes</h2>


<script src="~/Scripts/jquery.validate.js"></script>
<script src="~/Scripts/jquery.validate.min.js"></script>
<script src="~/Scripts/jquery.validate.unobtrusive.js"></script>
<script>
        $(document).ready(function () {
            $('[data-toggle="tooltip"]').tooltip();
        });
</script>
<style>
    .modal-dialog, .modal-body, form {
        width: 100%;
        height: 100%;
    }
</style>

<div class="modal-dialog">
    <div class="modal-content">
        @using (Html.BeginForm("ConsultarNutrientes", "Dieta", new { @class = "" },
                                                                              FormMethod.Post))
        {
            <div class="modal-header">
                <button type="button" class="close" id="close" data-dismiss="modal"><span aria-hidden="true">×</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title">Nutrientes</h4>
            </div>
            @Html.AntiForgeryToken()
            <div class="modal-body">
                <table id="tabelaAlimentos" class="table table-striped table-bordered table-hover dataTable no-footer dtr-inline sortable" cellspacing="0" style="width: 100%;display:">
                    <thead style="">
                        <tr>
                            <th>Carboidratos</th>

                            <th>Proteínas</th>

                            <th>Fibra Alimentar</th>
                            <!--abaixo ta string-->
                            <th>Sódio</th>

                            <th>Cálcio</th>

                            <th>Ferro</th>

                            <th>Potássio</th>

                            <th>Zinco</th>

                            <th>Vitamina C</th>
                        </tr>
                    </thead>
                    @foreach (var item in (ViewBag.listaAlimentosDetalhes))
                    {
                        <tr>
                            <td>
                              @item.CarboidratoS
                                 
                          </td>
                        
                        </tr>
                    }

                


                </table>




                <div id="chart_div" style="width: 100%; height:100%;margin-right:100px">
                </div>

            </div>

        }
    </div>
</div>
@*
    <script>
        $(function () {
            var linha = document.getElementById('tabelaAlimentos').rows;
            var dados = null;
            for (var i = 1 ; i < linha.length ; i++) {
                dados = linha[i].cells;
                for (var j = 0 ; j < dados.length ; j++) {
                     $('#totalCarboidrato').val(parseFloat(parseFloat($('#totalCarboidrato').val()) + parseFloat(dados[j].innerText)));
                }
            }
        });

    </script>



<script>

    sessionStorage.clear();
    //18 linhas contando com nome alimento
    var linha = document.getElementById('tabelaAlimentos').rows;
    var dados = null;
    for (var i = 1 ; i < linha.length ; i++) {
        dados = linha[i].cells;
        for (var j = 0 ; j < dados.length ; j++) {
            sessionStorage.setItem('coluna0' + [i], dados[j].innerText);

            sessionStorage.setItem('coluna1' + [i], dados[j + 1].innerText);
            sessionStorage.setItem('coluna2' + [i], dados[j + 2].innerText);
            sessionStorage.setItem('coluna3' + [i], dados[j + 3].innerText);
            sessionStorage.setItem('coluna4' + [i], dados[j + 4].innerText);
            sessionStorage.setItem('coluna5' + [i], dados[j + 5].innerText);
            sessionStorage.setItem('coluna6' + [i], dados[j + 6].innerText);
            sessionStorage.setItem('coluna7' + [i], dados[j + 7].innerText);
            sessionStorage.setItem('coluna8' + [i], dados[j + 8].innerText);
            break;
        }
    }


    var array = [];
    var array2 = [];
    var array3 = [];
    var array4 = [];

    var array5 = [];
    var array6 = [];
    var array7 = [];
    var array8 = [];

    var array9 = [];

    for (var i = 1; i < sessionStorage.length; i++) {
        if ((sessionStorage.getItem('coluna0' + [i]) != null)) {
            array[i] = sessionStorage.getItem('coluna0' + [i]);
            array2[i] = sessionStorage.getItem('coluna1' + [i]);
            array3[i] = sessionStorage.getItem('coluna2' + [i]);
            array4[i] = sessionStorage.getItem('coluna3' + [i]);
            array5[i] = sessionStorage.getItem('coluna4' + [i]);
            array6[i] = sessionStorage.getItem('coluna5' + [i]);
            array7[i] = sessionStorage.getItem('coluna6' + [i]);
            array8[i] = sessionStorage.getItem('coluna7' + [i]);
            array9[i] = sessionStorage.getItem('coluna8' + [i]);

        }
    }


    google.charts.setOnLoadCallback(drawChart);

    google.charts.load('43', { 'packages': ['corechart'], 'language': 'pt-br' });
    function drawChart() {

        var data = new google.visualization.DataTable();
        //   data.addColumn('string', 'data');
        //    data.addColumn('string', 'Receitas');
        //data.addColumn('string', 'Nutrientes')
        data.addColumn('number', 'Carboidratos');
         data.addColumn('number', 'Proteínas');
         data.addColumn('number', 'Fibra Alimentar');
         data.addColumn('number', 'Sódio');
         data.addColumn('number', 'Cálcio');
         data.addColumn('number', 'Ferro');
         data.addColumn('number', 'Potássio');
         data.addColumn('number', 'Zinco');
         data.addColumn('number', 'Vitamina C');


        for (var i = 1; i < array.length; i++) {

        


             data.addRows([
           [parseFloat(array[i]), parseFloat(array2[i]), parseFloat(array3[i]), parseFloat(array4[i])
           , parseFloat(array5[i]), parseFloat(array6[i]), parseFloat(array7[i]), parseFloat(array8[i])
           , parseFloat(array9[i])]

               ]);

        }




        var options = {
            title: 'Nutrientes',
            vAxis: { format: 'long' },
            hAxis: { textPosition: 'none' },
            seriesType: 'bars',
            'width': 900,
            'height': 400

        };


        var chart = new google.visualization.comboChart(document.getElementById('chart_div'));
        chart.draw(data, options);


    }

</script>
*@