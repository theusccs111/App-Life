@model APP_Life.Models.receita
@model PagedList.IPagedList<APP_Life.Models.receita>


@{
    ViewBag.Title = "Receita";
}


<style>
    .container {
        padding-top: 3%;
    }

    .modal-content {
        width: 600px !important;
        margin: 30px auto !important;
    }

    /*.r {
        margin-left: 70%;
        margin-bottom: 50px;
    }*/
      
    .alert {
        padding: 20px;
        background-color: #f44336; /* Red */
        color: white;
        margin-bottom: 15px;
    }

    /* The close button */
    .closebtn {
        margin-left: 15px;
        color: white;
        font-weight: bold;
        float: right;
        font-size: 22px;
        line-height: 20px;
        cursor: pointer;
        transition: 0.3s;
    }

        /* When moving the mouse over the close button */
        .closebtn:hover {
            color: black;
        }

    .alert {
        opacity: 1;
        transition: opacity 0.6s; /* 600ms to fade out */
    }

    .cab {
        font-family: 'Open Sans', 'Helvetica Neue', Arial, sans-serif;
        border-radius: 200px;
        font-weight: 700;
        text-transform: uppercase;
    }
</style>

<div id="cabeçalho" class="cab" style="color:#337ab7;">
    <h2>Receitas</h2>
    <p style="background:#e8e8e8; padding: 10px;">Controle de receitas</p>
    <p>
        <a href="@Url.Action("CadastrarReceita", "Lancamento")" class="modal-link btn btn-success r">
            <span class="fa fa-plus" aria-hidden="true"></span><span style="font-family: 'Open Sans', 'Helvetica Neue', Arial, sans-serif; border: none; font-weight: 700;">  Receita</span>
        </a>
        </p>
</div>
        <div id="modal-containerr" class="modal fade"
             tabindex="-1" role="dialog">
            <div class="modal-content">
            </div>
        </div>

        <table id="tabelaReceita" class="table table-striped table-bordered table-hover dataTable no-footer dtr-inline sortable" cellspacing="0" style="width: 100%;">
            <thead style="">
                <tr>

                    <th style="display:none;">Código</th>
                    <th>Categoria</th>
                    <th>Descrição</th>
                    <th>Data</th>
                    <th>Valor</th>
                    <th>Ações</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in (ViewBag.listaReceita))
                {
                    <tr>
                        <td id="@item.ReceitaID" style="display:none;">
                            @item.ReceitaID
                        </td>
                        <td>
                            @item.categoria.nome
                        </td>
                        <td>
                            @item.Descricao
                        </td>
                        <td>
                            @item.Data
                        </td>
                        <td>
                            @item.Valor
                        </td>

                        <td>
                            <!--@@Html.ActionLink("Edit", "Edit", new { id = item.ID }) |
                            -->


                            <a href="@Url.Action("ReceitaDelete", "Lancamento", new { id = @item.ReceitaID })" class="btn btn-danger">

                                <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
                            </a>
                            <button class="btn btn-primary edit eita" data-id="@item.ReceitaID"><i class="glyphicon glyphicon-edit"></i></button>

                    </tr>
                }
            </tbody>
        </table>

<div>
    Página @(Model.PageCount < Model.PageNumber ? 0 : Model.PageNumber)
    of @Model.PageCount

    @if (Model.HasPreviousPage)
    {
        @Html.ActionLink("<<", "Index", new { pagina = 1,mes = 11, sortOrder = ViewBag.CurrentSort, currentFilter = ViewBag.CurrentFilter })
        @Html.Raw(" ");
        @Html.ActionLink("< Anterior", "Index", new { pagina = Model.PageNumber - 1, mes = 11, sortOrder = ViewBag.CurrentSort, currentFilter = ViewBag.CurrentFilter })
    }
    else
    {
        @:<<
        @Html.Raw(" ");
        @:< Anterior
    }

    @if (Model.HasNextPage)
    {
        @Html.ActionLink("Próxima >", "Index", new { pagina = Model.PageNumber + 1, mes = 11, sortOrder = ViewBag.CurrentSort, currentFilter = ViewBag.CurrentFilter })
        @Html.Raw(" ");
        @Html.ActionLink(">>", "Index", new { pagina = Model.PageCount,  mes = 11, sortOrder = ViewBag.CurrentSort, currentFilter = ViewBag.CurrentFilter })
    }
    else
    {
        @:Próxima >
        @Html.Raw(" ")
        @:>>
    }
</div>



        <div class="modal fade" id="modalr">

        </div>
        <script type="text/javascript">

            $(".eita").click(function () {
                var id = $(this).attr("data-id");
                $("#modalr").load("ReceitaUpdate?id=" + id, function () {

                    $("#modalr").modal();
                })
            });

            $(function () {
                $('body').on('click', '.r', function (e) {
                    e.preventDefault();
                    $(this).attr('data-target', '#modal-containerr');
                    $(this).attr('data-toggle', 'modal');
                });

                $('body').on('click', '.modal-close-btn', function () {
                    $('#modal-containerr').modal('hide');
                });

                $('#modal-containerr').on('hidden.bs.modal', function () {
                    $(this).removeData('bs.modal');
                });
                $('#CancelModal').on('click', function () {
                    return false;
                });
            });


        </script>



